# ***AntiMalware***
# 1. ***Anti-Vírus***
- Hoje em dia a Internet está repleta de bots, vírus, worms e outros ataques automatizados. ***Muitos sistemas desprotegidos seriam comprometidos em questão de minutos se fossem conectados diretamente à Internet sem nenhum tipo de proteção.*** 
- **O software antivírus se baseia em assinaturas, significa que ele tem um banco de dados de assinaturas que identificam malware conhecido**, *como o hash de arquivo exclusivo de um binário malicioso ou o arquivo associado a uma infecção*. 
    - **Ou podem ser as características do tráfego de rede que o malware usa para se comunicar com um servidor de comando e controle.** 
- **O software antivírus monitora e analisa coisas**, como novos arquivos criados ou modificados no sistema, **para observar qualquer comportamento que corresponda a uma assinatura de malware conhecida.**
    - ***Se detectar atividade que corresponda à assinatura, dependendo do tipo da assinatura, ele tentará impedir que o malware cause danos ao sistema.***
        - *Mas algumas assinaturas talvez só consigam detectar o malware após a ocorrência da infecção*, no caso, ele pode tentar colocar em quarentena os arquivos infectados. Se não conseguir, ele só vai registrar e alertar o evento de detecção. 
- Em geral, é assim que todos os produtos antivírus funcionam. **Mas há dois problemas com o software antivírus**:
1. *Eles dependem de assinaturas de antivírus distribuídas pelo fornecedor do software antivírus.*  
2. *Precisam que o fornecedor de antivírus descubra novos malwares e escreva novas assinaturas para ameaças recém-descobertas.*
    - Ou seja, ***Até que o fornecedor escreva, publique e dissemine novas assinaturas, o antivírus não vai ter como te proteger dessas ameaças.***
- Ironicamente o antivírus pode representar mais uma superfície de ataque que invasores podem explorar, isso se deve à própria natureza do que um mecanismo antivírus faz, *na qual ele recebe binários arbitrários e possivelmente maliciosos* como entrada e executa várias operações neles. 
    - *Por isso, há muitos códigos complexos em que podem existir bugs muito graves.*    
- ***Mas ainda sim ele protege contra os ataques mais comuns que ocorrem na Internet. As coisas realmente óbvias que ainda representam uma ameaça aos seus sistemas ainda precisam ser evitadas***, a defesa em profundidade envolve várias camadas de proteção e o antivírus é uma parte das defesas. 

## 1.1 **Ameaças Desconhecidas**
- Entendendo que o Antivirus protege de amaeças *conhecidas*, devido à necessidade de ter uma assinatura *conhecida* para que se tenha uma lista de bloqueio, verificando tal lista e bloqueando o que corresponder, há uma classe de software antimalware que faz o oposto conhecido como ***Binary Whitelist***


### 1.1.1 ***Binary Whitelist***
- **O binary whitelisting software opera com uma lista de permissões**, sendo uma lista de softwares conhecidos, bons e confiáveis, e somente os itens que estão na lista podem ser executados. Todo o resto é bloqueado. ***É como aplicar a regra para ACL de negação implícita à execução de softwares.***
    - *Lembrando que isso normalmente só se aplica a binários executáveis, não a arquivos arbitrários como documentos PDF ou arquivos de texto. Isso naturalmente protegeria contra ameaças desconhecidas, mas em detrimento da conveniência*.
- Por isso o binary whitelisting software pode confiar no software usando alguns mecanismos diferentes: 
1. ***Usar o hash criptográfico exclusivo dos binários***, usado para identificar binários exclusivos. 
    - Isso é usado para colocar executáveis individuais na lista de permissões. 
2. ***O outro mecanismo de confiança é um certificado de assinatura de software por meio de um fornecedor confiável*** que pode assinar criptograficamente os binários que distribui usando uma chave privada. 
    - *A assinatura pode ser verificada no momento da execução, conferindo usando a chave pública incorporada no certificado e verificando a cadeia de confiança Se o hash corresponder e a chave pública for confiável, é possível confirmar sua procedencia.*
    - Os sistemas de binary whitelisting podem ser configurados para confiar em certificados de assinatura de código de fornecedores específicos permitindo a execução de todos os binários assinados com o certificado. **Isso é útil para confiar automaticamente no conteúdo, como atualizações do sistema**, mas *cada novo certificado de assinatura de código confiável representa um aumento na superfície de ataque*. 
